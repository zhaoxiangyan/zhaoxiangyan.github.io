(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{473:function(s,a,t){"use strict";t.r(a);var n=t(36),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"pm2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pm2"}},[s._v("#")]),s._v(" pm2")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 普通 General")]),s._v("\n$ npm install pm2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装 PM2")]),s._v("\n$ pm2 start app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动，守护进程，自动重启应用程序 Start, Daemonize and auto-restart application (Node)")]),s._v("\n$ pm2 start app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动，守护进程，自动重启python应用程序 Start, Daemonize and auto-restart application (Python)")]),s._v("\n$ pm2 start npm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" start        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动，守护进程，自动重启node应用程序 Start, Daemonize and auto-restart Node application")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 集群模式 (只支持node进程) Cluster Mode (Node.js only)")]),s._v("\n$ pm2 start app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("i "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在集群模式下，启动4个应用程序实例  Start 4 instances of application in cluster mode")]),s._v("\n                                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同时，将网络请求，负载均衡到每个应用实例  it will load balance network queries to each app")]),s._v("\n$ pm2 reload all                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 0秒重启所有应用 Zero Second Downtime Reload")]),s._v("\n$ pm2 scale "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将应用进程调整到10 Scale Cluster app to 10 process")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进程监控 Scale Cluster app to 10 process")]),s._v("\n$ pm2 list                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有用PM2启动的进程 List all processes started with PM2")]),s._v("\n$ pm2 monit                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示每个应用占用的cpu和内存 Display memory and cpu usage of each app")]),s._v("\n$ pm2 show "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示某个进程的所有信息 Show all informations about application")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 日志管理 Log management")]),s._v("\n$ pm2 logs                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有应用的日志  Display logs of all apps")]),s._v("\n$ pm2 logs "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示某个应用的日志 Display logs for a specific app")]),s._v("\n$ pm2 logs "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("json               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# json化日志 Logs in JSON format")]),s._v("\n$ pm2 flush\n$ pm2 reloadLogs\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进程状态管理 Process State Management")]),s._v("\n$ pm2 start app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"api"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 启动一个应用并命名为api。 Start application and name it "api"')]),s._v("\n$ pm2 start app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 启动一个应用，并传递“-a 34”的参数。 Start app and pass option "-a 34" as argument')]),s._v("\n$ pm2 start app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("watch      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启一个应用，当文件改变的时候。Restart application on file change")]),s._v("\n$ pm2 start script"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动一个bash脚本。Start bash script")]),s._v("\n$ pm2 start app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动在app.json中声明的所有应用。Start all applications declared in app.json")]),s._v("\n$ pm2 reset "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重置所有计数器。Reset all counters")]),s._v("\n$ pm2 stop all                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止所有应用。Stop all apps")]),s._v("\n$ pm2 stop "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止id 为0的应用。Stop process with id 0")]),s._v("\n$ pm2 restart all               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启所有应用。Restart all apps")]),s._v("\n$ pm2 gracefulReload all        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在集群模式下，平稳的重加载所有应用。Graceful reload all apps in cluster mode")]),s._v("\n$ pm2 delete all                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 杀掉所有应用。Kill and delete all apps")]),s._v("\n$ pm2 delete "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 杀掉id为0的进程。Delete app with id 0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动／引导管理 Startup/Boot management")]),s._v("\n$ pm2 startup                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检测init系统，在启动时生成和配置pm2。Detect init system, generate and configure pm2 boot on startup")]),s._v("\n$ pm2 save                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存当前进程列表。Save current process list")]),s._v("\n$ pm2 resurrect                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复以前保存的进程。Restore previously save processes")]),s._v("\n$ pm2 unstartup                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停用和删除启动系统。Disable and remove startup system")]),s._v("\n$ pm2 update                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存进程，终止PM2并恢复进程。Save processes, kill PM2 and restore processes")]),s._v("\n$ pm2 generate                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成样本json配置文件。Generate a sample json configuration file")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 部署 Deployment")]),s._v("\n$ pm2 deploy app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json prod setup    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 设置“生产环境”远程服务器。 Setup "prod" remote server')]),s._v("\n$ pm2 deploy app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json prod          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 更新“生产环境”远程服务器。 Update "prod" remote server')]),s._v("\n$ pm2 deploy app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json prod revert "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 将“生产环境”远程服务器恢复2。Revert "prod" remote server by 2')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 模块系统 Module system")]),s._v("\n$ pm2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":generate")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成名称为[name]的示例模块。Generate sample module with name [name]")]),s._v("\n$ pm2 install pm2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logrotate     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装模块（这里是日志循环系统）。Install module (here a log rotation system)")]),s._v("\n$ pm2 uninstall pm2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logrotate   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 卸载模块。Uninstall module")]),s._v("\n$ pm2 publish                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增量版本，git push和npm发布。Increment version, git push and npm publish")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);